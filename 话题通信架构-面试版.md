# 项目话题通信架构（面试版）

## 核心架构

```
【规划模块组】
pnc_map_server_node
    ├─ 发布: /planning/pnc_map
    └─ 服务: /planning/pnc_map_service

global_path_server_node  
    ├─ 发布: /planning/global_path
    └─ 服务: /planning/global_path_service

planning_process (核心节点)
    ├─ 订阅服务: 获取地图和全局路径
    └─ 发布话题: 
        ├─ /planning/reference_line (参考线)
        ├─ /planning/local_path (局部路径)
        └─ /planning/local_trajectory (轨迹)

【执行模块组】
car_move_cmd_node
    └─ 订阅: /planning/local_trajectory → 广播主车TF

obs_move_cmd_node
    └─ 广播: 障碍物TF
```

## 通信模式

### 1. 服务调用（初始化）
- `planning_process` 通过服务获取地图和全局路径
- 同步阻塞，保证数据完整性

### 2. 话题发布（实时运行）
- `planning_process` 以10Hz频率发布规划结果
- `car_move_cmd` 订阅轨迹，驱动车辆运动
- 形成闭环：规划 → 执行 → TF反馈 → 继续规划

## 关键设计

1. **命名空间隔离**: 所有话题在 `/planning` 下
2. **服务+话题混合**: 服务用于初始化，话题用于实时通信
3. **模块化设计**: 每个模块独立发布，便于扩展
4. **实时性**: 10Hz发布频率，支持实时规划

## 数据流

```
初始化: planning_process → [服务] → 地图/路径服务器
运行: planning_process (10Hz) → [话题] → car_move_cmd → TF → planning_process
```

