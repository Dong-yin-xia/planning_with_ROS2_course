# 基于ROS2的自动驾驶规划系统

**2024.12**

## 项目描述

该项目主要用于实现自动驾驶车辆的路径规划、决策控制和轨迹生成等功能，本人负责上位机软件开发。

## 工作内容

①基于C++17和ROS2 Humble框架，设计并实现了Frenet坐标系的局部路径规划算法，使用Eigen3库进行矩阵运算和五次多项式系数求解，实现了分段轨迹拼接、路径平滑算法，以及完整的Frenet到笛卡尔坐标转换（位置、姿态、曲率等参数计算）。

②使用C++开发了障碍物避让决策算法，实现了基于相对速度的交汇点预测算法、左右可通行宽度计算、变道决策逻辑（左绕/右绕/停车），并生成SL关键点序列供路径规划使用。

③基于ROS2的nav_msgs和geometry_msgs消息类型，实现了参考线生成与平滑模块，包括在全局路径上基于车辆位姿的匹配点查找算法、前后窗口截取、参考线平滑算法，并计算每个点的投影参数（rs、rtheta、rkappa、rdkappa）用于Frenet转换。

④设计了基于ROS2 rclcpp的服务/话题通信架构，实现了PNC地图服务、全局路径规划服务、参考线/局部路径/轨迹的实时发布，使用TF2和tf2_ros进行多坐标系变换和位姿管理，支持RViz2可视化显示。

⑤使用ROS2的定时器（Timer）和TF2监听器（TransformListener）实现了完整的规划流程调度系统，实时获取车辆与障碍物位姿，协调参考线生成、决策、局部路径规划和轨迹合成等模块，形成完整的规划闭环。

⑥基于yaml-cpp库开发了YAML配置管理系统，通过C++的ConfigReader类实现车辆参数、地图参数、规划器参数、决策参数等的统一配置和动态加载，使用CMake/ament_cmake构建系统进行项目管理。

